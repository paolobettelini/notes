\documentclass[preview]{standalone}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{stellar}
\usepackage{definitions}
\usepackage{bettelini}

\begin{document}

\id{functions-basic-results}
\genpage

\section{Basic results}

\begin{snippetproposition}{injective-composition-is-injective}{Injective composition is injective}
    Let \(f\colon A \fromto B\) and \(g\colon B \fromto C\) be \function[functions] that are \injective.
    Then, the \function \(g(f(x))\) is \injective.
\end{snippetproposition}

\begin{snippetproof}{injective-composition-is-injective-proof}{injective-composition-is-injective}{Injective composition is injective}
    Let \(a_1, a_2 \in A\) where \(a_1 \neq a_2\). We must show that \(g(f(a_1)) \neq g(f(a_2))\).
    Since \(f\) is \injective, we know that \(f(a_1) \neq f(a_2)\).
    Since \(g\) is \injective, we know that \(g(f(a_1)) \neq f(g(a_2))\).
\end{snippetproof}

\begin{snippetproposition}{surjective-composition-is-surjective}{Surjective composition is surjective}
    Let \(f\colon A \fromto B\) and \(g\colon B \fromto C\) be \function[functions] that are \surjective.
    Then, the \function \(g(f(x))\) is \surjective.
\end{snippetproposition}

% TODO check these
\begin{snippetproof}{surjective-composition-is-surjective-proof}{surjective-composition-is-surjective}{Surjective composition is surjective}
    Let \(c \in C\), we must show that there exists at least one \(a\in A\) such that \(c=g(f(a))\).
    Since \(f\) is \surjective, there exists a \(a\in A\) such that \(c = g(b)\).
    Since \(g\) is \surjective, there exists an \(b\in B\) such that \(b = f(a)\).
    Thus, \(c = g(f(a))\).
\end{snippetproof}

\begin{snippetproposition}{bijective-composition-is-bijective}{Bijective composition is bijective}
    Let \(f\colon A \fromto B\) and \(g\colon B \fromto C\) be \function[functions] that are \bijective.
    Then, the \function \(g(f(x))\) is \bijective.
\end{snippetproposition}

\begin{snippetproposition}{injective-composition-property}{}
    Let \(f\colon A \fromto B\) and \(g\colon B \fromto C\) be \function[functions]
    such that \(g(f)\) is \injective. Then, \(f\) is also \injective.
\end{snippetproposition}

\begin{snippetproof}{injective-composition-property-proof}{injective-composition-property}{}
    \todo%Supponiamo che \(g(f)\) sia iniettiva.
    %Dunque, per ogni \(a_1, a_2 \in A\) dove \(a_1 \neq a_2\), risulta che \(g(f(a_1)) \neq g(f(a_2))\).
    %Sicuramente la prima funzione non può fare convergere i due elementi, in quando non potrebbero uscire separati
    %dopo la seconda funzione.
    %In particolare, \(f(a_1) \neq f(a_2)\). Quindi, \(f\) è iniettiva.
    %ma non possiamo dire che g è iniettiva
\end{snippetproof}

\begin{snippetproposition}{surjective-composition-property}{}
    Let \(f\colon A \fromto B\) and \(g\colon B \fromto C\) be \function[functions]
    such that \(g(f)\) is \surjective. Then, \(g\) is also \surjective.
\end{snippetproposition}

\begin{snippetproof}{surjective-composition-property-proof}{surjective-composition-property}{}
    \todo%Supponiamo che \(g(f)\) sia suriettiva.
    %Dunque, per ogni \(c\in C\) esiste \(a\) tale che \(c=g(f(a))\).
    %In particolare, posto \(b=f(a) \in B\), abbiamo che \(g(b)=c\) cioè \(g\) è suriettiva.
    %ma non possiamo dire che f sia suriettiva
\end{snippetproof}

\section{Invertibility}

\begin{snippettheorem}{invertible-function-bijective-theorem}{Invertibility \(\iff\) bijectivity}
    A \function is \snippetref[inverse-function-definition][invertible]
    \ifandonlyif it is \snippetref[bijectivity-definition][bijective].
\end{snippettheorem}

\begin{snippetproof}{invertible-function-bijective-theorem-proof}{invertible-function-bijective-theorem}{Invertibility \(\iff\) bijectivity}
    \iffproof{
        TODO%Sia \(f\) invertibile. Allora sappiamo che \(f(f^{-1})\) è la funzione identità di \(A\) e \(f^{-1}(f)\)
        %è la funzione identità di \(B\).
        %Ora, l'identità di \(A\) è iniettiva (anche biettiva), dunque \(f\) è iniettiva
        %e l'identità di \(B\) è suriettiva (dalle due proposizioni di prima), dunque \(f\) è suriettiva.
    }{
        TODO%Sia \(f\) biettiva.
        %Dobbiamo costruire \(g \colon B \to A\) tale che \(f(g)\) è l'identità di \(A\) e \(f(g)\) è l'identità di \(B\).
        %Sappiamo che per ogni \(b\in B\) esiste un unico \(a\in A\) tale che
        %\(f(a) = b\). Poniamo allora \(g(b)=a\). Se \(b \in B\), allora \(f(g(b)) = f(a) = b\).
        %Se \(a\in A\), abbiamo che \(g(f(a))\) è per definizione di \(g\) l'unico elemento \(a'\in A\)
        %tale che  \(f(a') = f(a)\). Siccome \(f\) è iniettiva, \(a'=a\), e quindi \(g(f(a)) = a\)
        %e quindi \(g=f^{-1}\).
    }
\end{snippetproof}

\begin{snippetproposition}{inverse-function-is-unique}{Inverse function is unique}
    Let \(f\colon A \fromto B\) be a \function that has an inverse \(f^\inversefunction\).
    Then, \(f^\inversefunction\) is unique.
\end{snippetproposition}

\begin{snippetproof}{inverse-function-is-unique-proof}{inverse-function-is-unique}{Inverse function is unique}
    Let \(h \colon B \fromto A\) such that \(h(f(a)) = a\) and \(f(h(b)) = b\).
    TODO
\end{snippetproof}

\subsection{Galois connection}

\begin{snippettheorem}{function-adjunction-theorem}{}
    Let \(f\colon X \fromto Y\) be a \function and \(S \subseteq X, T\subseteq Y\).
    Then, \[
        S \subseteq f^{-1}(T) \iff f(S) \subseteq T
    \]
\end{snippettheorem}

\begin{snippetproof}{function-adjunction-theorem-proof}{function-adjunction-theorem}{}
    \iffproof{
        Let \( y \in f(S) \). Then there exists \( x \in S \) such that \( f(x) = y \).
        Since \( x \in S \subseteq f^{-1}(T) \), by definition of preimage we have
        \( f(x) \in T \).
        Hence \( y \in T \), and therefore \( f(S) \subseteq T \).
    }{
        Let \( x \in S \). Then \( f(x) \in f(S) \subseteq T \).
        By definition of preimage, this implies \( x \in f^{-1}(T) \).
        Hence \( S \subseteq f^{-1}(T) \).
    }
\end{snippetproof}

\begin{snippetproposition}{inverse-function-preserves-union}{Inverse image preserves unions}
    Let \(f\colon X \fromto Y\) be a \function and \(A, B \subseteq Y\). Then,
    \[
        f^{-1}(A \union B) = f^{-1}(A) \union f^{-1}(B)
    \]
\end{snippetproposition}

\begin{snippetproof}{inverse-function-preserves-union-proof}{inverse-function-preserves-union}{Inverse image preserves unions}
    Let \(S \subseteq X\). Then, by \snippetref[function-adjunction-theorem][this equivalence]
    we have \(S \subseteq f^{-1}(A \union B)\) \ifandonlyif \(f(S) \subseteq A \union B\),
    which holds \ifandonlyif \(f(S) \subseteq A \lor f(S) \subseteq B\).
    Again, by the same equivalence, this is equivalent to
    \(S \subseteq f^{-1}(A) \lor S \subseteq f^{-1}(B)\). That is,
    \(S \subseteq f^{-1}(A) \union f^{-1}(B)\).
    Since this holds for all \(S\subseteq X\), we conclude the thesis.
\end{snippetproof}

\begin{snippetproposition}{inverse-function-preserves-arbitrary-union}{Inverse image preserves unions}
    Let \(f\colon X \fromto Y\) be a \function and \(A_i \subseteq Y\) for some \(i \in I\). Then,
    \[
        f^{-1}\left(\bigcup_{i\in I} A_i\right) = \bigcup_{i\in I} f^{-1}(A_i)
    \]
\end{snippetproposition}

\begin{snippetproposition}{inverse-function-preserves-intersection}{Inverse image preserves intersections}
    Let \(f\colon X \fromto Y\) be a \function and \(A, B \subseteq Y\). Then,
    \[
        f^{-1}(A \intersection B) = f^{-1}(A) \intersection f^{-1}(B)
    \]
\end{snippetproposition}

\begin{snippetproposition}{inverse-function-preserves-arbitrary-intersection}{Inverse image preserves intersections}
    Let \(f\colon X \fromto Y\) be a \function and \(A_i \subseteq Y\) for some \(i \in I\). Then,
    \[
        f^{-1}\left(\bigcap_{i\in I} A_i\right) = \bigcap_{i\in I} f^{-1}(A_i)
    \]
\end{snippetproposition}

\begin{snippetproposition}{inverse-function-preserves-complement}{Inverse image preserves complements}
    Let \(f\colon X \fromto Y\) be a \function and \(A\subseteq Y\). Then,
    \[
        f^{-1}(X \difference A) = Y \difference f^{-1}(A)
    \]
\end{snippetproposition}

\plain{The same does not work in general for the image. Only for the union.}

\begin{snippetproposition}{function-preserves-arbitrary-union}{Image preserves unions}
    Let \(f\colon X \fromto Y\) be a \function and \(A_i \subseteq Y\) for some \(i \in I\). Then,
    \[
        f\left(\bigcup_{i\in I} A_i\right) = \bigcup_{i\in I} f(A_i)
    \]
\end{snippetproposition}

\end{document}