\documentclass[preview]{standalone}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{bettelini}
\usepackage{stellar}
\usepackage{definitions}
\usepackage{cancel}

\begin{document}

\id{settheory-relations}
\genpage

\section{Relations}

\begin{snippetdefinition}{binary-relation-definition}{Binary relation}
    Let \(A\) and \(B\) be \set[sets].
    A \textit{binary relation} between \(A\) and \(B\) is a \set \(R\)
    where
    \[ R \subseteq A \cartesianprod B \]
    Given two elements \(a\in A\) and \(b\in B\), we say that
    \(a\,R\,b\) if \((a,b) \in R\) and \(a\,\cancel{R}\,b\) if \((a,b) \notin R\).
\end{snippetdefinition}

% a more generic relation is an n-tuple

\begin{snippetdefinition}{relation-composition-definition}{Relation composition}
    Let \(A\), \(B\) and \(C\) be \set[sets], \(S\) be a \binrelation between
    \(A\) and \(B\) and \(T\) a \binrelation between \(B\) and \(C\).
    The \textit{composition} of \(S\) and \(T\) is the \binrelation \(ST\)
    defined as follows:
    \[
        (a,c) \in ST \iff \exists b \in B \suchthat (a,b) \in S \land (b,c) \in T
    \]
\end{snippetdefinition}

\begin{snippetdefinition}{homogeneous-relation-definition}{Homogeneous Relation}
    Let \(A\) be a \set. A \textit{homogeneous relation} on \(A\) is a \binrelation
    from a \(A\) to \(A\).
\end{snippetdefinition}

%\begin{snippetdefinition}{refexive-relation-definition}{Reflexive relation}
%    A \homrelation \(R\) on a set \(A\) is \textit{reflexive}
%    if
%    \[
%        \forall a\in A, (a,a) \in R
%    \]
%\end{snippetdefinition}
%
%\begin{snippetdefinition}{symmetric-relation-definition}{Symmetric relation}
%    A \homrelation \(R\) on a set \(A\) is \textit{symmetric}
%    if
%    \[
%        \forall (a,b) \in R, (b,a) \in R
%    \]
%\end{snippetdefinition}
%
%\begin{snippetdefinition}{transitive-relation-definition}{Transitive relation}
%    A \homrelation \(R\) on a set \(A\) is \textit{transitive}
%    \[
%        \forall a,b,c \in A, (a,b) \in R \land (b,c) \in R \implies (a,c) \in R 
%    \]
%\end{snippetdefinition}

\begin{snippetdefinition}{equivalence-relation-definition}{Equivalence relation}
    An \emph{equivalence relation} is a \homrelation \(\sim\) on a \set \(A\)
    that is
    \begin{enumerate}
        \item \emph{Reflexive}: \(\forall a \in A, a \sim a\)
        \item \emph{Symmetric}: \(\forall a,b \in A, a \sim b \iff b \sim a\)
        \item \emph{Transitive}: \(\forall a,b,c \in A, a \sim b \land b \sim c \implies a \sim c\)
    \end{enumerate}
\end{snippetdefinition}

% =, tripla barra, tilde, doppia tilde, etc.

\section{Equivalence class}

\begin{snippetdefinition}{equivalence-class-definition}{Equivalence class}
    \def\rel{\violet \sim \clear}
    \def\setA{\blue A \clear}
    \def\elA{\blue a \clear}
    \def\elX{\brown x \clear}
    Let \(\rel\) be an \equivrelation on a \set \(\setA\).
    Given an element \(\elA\in \setA\), the \textit{equivalence class} of \(\elA\), is defined as
    \[
        {[\elA]}_{\rel} = \{\elX \in \setA \suchthat \elA \rel \elX\}
    \]
\end{snippetdefinition}

% a \in {[a]}_\sim

% b \in {[a]}_\sim allora a \in {[b]}_\sim

% b \in {[a]}_\sim and c \in {[b]}_\sim then c \in {[a]}_\sim

\begin{snippettheorem}{shared-element-in-equivalence-class-theorem}{Shared element in equivalence class}
    Let \(\sim\) be an \equivrelation on a \set \(A\)
    and \(a,b \in A\).
    Then,
    \[
        b \in {[a]}_{\sim} \iff {[a]}_{\sim} = {[b]}_{\sim}
    \]
\end{snippettheorem}

\plain{Every element of an equivalence classe determines the class itself (it is representative).}

\begin{snippetproof}{shared-element-in-equivalence-class-proof}{shared-element-in-equivalence-class-theorem}{Shared element in equivalence class}
    By the symmetric property we have \(a \in {[a]}_{\sim}\).
    Let \(b \in {[a]}_{\sim}\), meaning \(a \sim b\). \(\forall c \in {[b]}_{\sim}\),
    meaning \(b \sim c\), we have \(a \sim c\) by the transitive property.
    Thus, \(c \in {[a]}_{\sim}\) and \({[b]}_{\sim} \subseteq {[a]}_{\sim}\).
    By the symmetric property we also have \(b \sim a\),
    \(\forall d \in {[a]}_{\sim}\), meaning \(a \sim d\), we have
    \(b \sim d\) by the transitive property. Thus, \(d \in {[b]}_{\sim}\)
    and \({[a]}_{\sim} \subseteq {[b]}_{\sim}\). Hence,
    \[
        b \in {[a]}_{\sim} \iff {[a]}_{\sim} = {[b]}_{\sim}
    \]
\end{snippetproof}

\begin{snippet}{equivalence-expl-1}
    This means that every element of an \equivclass has the same \equivclass.
    Thus, if two classes share an element they are the same.
\end{snippet}

% corollary of shared-element-in-equivalence-class-theorem
\begin{snippetcorollary}{distinct-equivalence-classes-disjoint}{Distinct equivalence classes are disjoint}
    Let \(\sim\) be an \equivrelation on a \set \(A\)
    and \(a,b \in A\). Then, \[
        {[a]_\sim} \intersection {[b]_\sim} \neq \emptyset \iff {[a]_\sim} = {[b]_\sim}
    \]
\end{snippetcorollary}

\begin{snippetdefinition}{quotient-set-definition}{Quotient set}
    Let \(\sim\) be an \equivrelation on a \set \(A\).
    The \textit{quotient set} of \(A\) by \(\sim\) is defined as
    the \set of the \equivclass[equivalence classes] of \(A\) by \(\sim\).
    \[ A /_\sim = \{ {[a]}_\sim \suchthat a \in A \} \]
\end{snippetdefinition}

\section{Partition of a set}

\begin{snippetdefinition}{set-partition-definition}{Partition of a set}
    Given a \set \(A\), a \textit{partition} of \(A\) is a collection \({\{C_i\}}_{i\in I}\) of
    non-empty subsets of \(A\) such that
    \[
        \bigcup_{i\in I} C_i = A, \quad i \neq j \implies C_i \intersection C_j = \emptyset
    \]
\end{snippetdefinition}

\begin{snippet}{settheory-2}
    In other words, the \set[sets] \(C_i\)
    contain every element of \(A\) exactly once.
\end{snippet}

\begin{snippettheorem}{equivalence-classes-form-partition-theorem}{Equivalence classes form partitions}
    Let \(\sim\) be an \equivrelation on a \set \(A\).
    \begin{enumerate}
        \item The \quotset \(A/_\sim\) is a \partition of \(A\);
        \item given a \partition of \(A\), there exists a unique \equivrelation on \(A\)
        whose \equivclass[equivalence classes] are the elements of the partition.
    \end{enumerate}
\end{snippettheorem}

\begin{snippetproof}{equivalence-classes-form-partition-theorem-proof}{equivalence-classes-form-partition-theorem}{Equivalence classes form partitions}
    \begin{enumerate}
        \item For every \(a\in A\), \(a \in {[a]}_\sim \in A/_\sim\). This means that the elements of \(A/_\sim\)
            are non-empty and their union is \(A\)
            \[ \bigcup_{c \in A/_\sim} c = A\]
            Furthermore, distinct classes in \(A/_\sim\) \snippetref[distinct-equivalence-classes-disjoint][are disjoint] and 
            thus \(A/_\sim\) is a \partition;
        \item Given a partition \(\{C_i\}_{i\in I}\) of \(A\), we construct an \equivrelation \(\approx\) where
        \(a \approx b\) if \(\exists i\in I \suchthat a,b \in C_i \).
        Given \(a\in A\), \({[a]}_\approx = C_i\) where \(a \in C_i\) (which is unique).
        The transitive property is given by the fact that the \set[sets] of the partition are disjoint,
        so it \(a,b\in C_i\) and \(b,c\in C_j\), then \(i=j\) and thus \(a,c \in C_i\).
        The other two properties are trivial since the partition constructs the whole set.
        % prove that is it unique
    \end{enumerate}
\end{snippetproof}

\begin{snippet}{equivalence-classes-form-partition-theorem-expl}
    An \equivrelation and its associated \partition are both objects representing the same information
\end{snippet}

\begin{snippetproposition}{binary-relation-equivalence-condition}{Equivalence condition for binary relation}
    Let \(\sim\) be a reflexive \binrelation on a set \(A\).
    Then, \(\sim\) is an \equivrelation \ifandonlyif
    \[ a\sim b \land a \sim c \implies b \sim c \]
\end{snippetproposition}

\begin{snippetproof}{binary-relation-equivalence-condition-proof}{binary-relation-equivalence-condition}{Equivalence condition for binary relation}
    We need to prove that the relation \(\sim\) is symmetric and transitive.
    Let \(a,b,c\in A\) \\
    \iffproof{
        Since \(\sim\) is transitive, we have that \(a \sim b \land b \sim c \implies a \sim c\).
        We can replace \(a \sim b\) by \(b \sim a\) since \(\sim\) is symmetric, and thus
        \(a\sim b \land a \sim c \implies b \sim c\).
    }{
        \begin{itemize}
            \item \textbf{symmetric:} by letting \(a=c\) we get
            \(a\sim b \land a \sim a \implies b \sim a\). Since \(a\sim a\) we have that
            \(b \sim a\), and thus \(\sim\) is symmetric.
            \item \textbf{transitive:} since \(\sim\) is symmetric
                we can change the condition to \(b\sim a \land a \sim c \implies b \sim c\), which is
                transitivity.
        \end{itemize}
    }
\end{snippetproof}

\begin{snippetproposition}{equivalence-relations-intersection-is-equivalence}{Intersections of equivalence relations}
    Let \(A\) be a \set and \(\{R_i\}_{i\in I}\) a collection of \equivrelation[equivalence relations] on \(A\).
    The \binrelation
    \[ \bigcap_{i\in I} R_i \]
    is an \equivrelation.
\end{snippetproposition}

\begin{snippetproof}{equivalence-relations-intersection-is-equivalence-proof}{equivalence-relations-intersection-is-equivalence}{Intersections of equivalence relations}
    Let \( R=\bigcap_{i\in I} R_i \) and \(a,b,c\in A\).
    \begin{enumerate}
        \item \textbf{reflexive:} \(\forall a \in A, (a,a) \in R\) since \((a,a) \in R_i\);
        \item \textbf{symmetric:} if every \(R_i\) contains \((a,b)\), then every \(R_i\) also contains \((b,a)\),
            and thus \(R\) too. 
        \item \textbf{transitive:} if every \(R_i\) contains \((a,b)\) and \((b,c)\), then every \(R_i\)
            also contains \((a,c)\), and thus \(R\) too.
    \end{enumerate}
\end{snippetproof}

\end{document}